name: Sync OpenPack Documentation

on:
  push:
    branches:
      - "main"
      - "feat/getty708/**"
jobs:
  move-code:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
        with:
          fetch-depth: 0

      - uses: olivr/copybara-action@v1.2.3
        with:
          access_token: ${{ secrets.GH_TOKEN }}
          ssh_key: ${{ secrets.SSH_KEY }}
          ssh_known_hosts: ${{ secrets.SSH_KNOWN_HOSTS }}
          sot_repo: open-pack/openpack-dataset
          sot_branch: feat/getty708/copybra-integration
          destination_repo: open-pack/openpack-toolkit
          destination_branch: main

          push_include: "docs/**/*.md"
          push_exclude: ""

          pr_move: |
            ||docs/openpack-dataset
